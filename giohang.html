<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Assets/css/style.css">
    <link rel="stylesheet" href="Assets/css/giohang.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.2.3/css/flag-icons.min.css"/>
    <title>Gi·ªè H√†ng - CTU</title>
</head>
<body>
    <header class="page__header">
        <nav class="header__nav">
            <a class="nav-logo__link-logo nav-logo-mobile" href="index.html">C<span style="color: white;">SS</span></a>
            <a class="nav-logo__link-logo nav-logo" href="index.html">CTU <span style="font-family: K2D; color: white;">Souvenir Shop</span></a>
            <button class="hamburger-menu" onclick="NavToggle()"><i class="ri-menu-line"></i></button>
            <ul id="top-nav" class="nav__link--flex-row">
                <li>
                    <div class="nav-search-bar">
                        <input class="nav-search-bar__input" type="text" placeholder="ƒê·ªìng ph·ª•c CTU, M√≥c kho√° Capybara">
                        <i class="nav-search-bar__icon ri-search-eye-line"></i>
                    </div>
                </li>
                <li class="link-cart link-mobile">
                    <a class="link__item" href="giohang.html">
                        <i class="ri-shopping-cart-2-fill"></i><span>Gi·ªè h√†ng</span>
                    </a>
                </li>
                <details class="nav-lang__details link__item link-mobile">
                    <summary class="nav-logo__summary details__summary"><div class="nav-logo__button">Ng√¥n Ng·ªØ</div></summary>
                    <div class="details__container--lang">
                        <a class="details__link--lang" onclick="" href=""><i class="fi fi-gb"></i> English</a>
                        <a class="details__link--lang" onclick="" href=""><i class="fi fi-vn"></i> Ti·∫øng Vi·ªát</a>
                    </div>
                </details>
                <li><a class="link-support link-mobile" href="hotro.html">H·ªó Tr·ª£</a></li>
                <li class="link-mobile">
                    <a id="user-login" class="link-user--responsive link__item" href="html_login.html"><i class="ri-user-fill"></i></a>
                    <a id="user-login" class="link-user link__item" href="html_login.html">ƒêƒÉng Nh·∫≠p</a>
                </li>
                <li class="link-mobile"><a id="user-sign-up" class="link-user link__item " href="html_signup.html">ƒêƒÉng K√Ω</a></li>
            </ul>
        </nav>
        <div class="header-informations">
            <a href="danhmuc.html" class="nav__link--catalog"><i class="nav-search-list ri-book-2-line"></i>Danh M·ª•c</a>
            <marquee class="header-informations__announcement" behavior="scroll" direction="left">Th√¥ng B√°o!</marquee>
        </div>
    </header>
    
    <main class="main">
        <div class="cart-container">
            <i id="cart-icon"></i> 
            <p class="cart-empty" id="cart-empty"></p>
            <div id="cart-items"></div>
        </div>
    </main>
    <div class="cart-footer">
        <div class="left">
            <a href="#" style="color: white; text-decoration: none;" onclick="clearCart()">X√≥a</a>|
            <a href="#" style="color: white; text-decoration: none;">L∆∞u v√†o m·ª•c ƒê√£ th√≠ch...</a>
        </div>
        <div class="right">
            <p><strong>T·ªïng ti·ªÅn: </strong><span id="total-price">0</span>ƒë</p>
            <button class="button" onclick="goToCheckout()">Mua h√†ng</button>
        </div>
    </div>
    <footer class="page__footer">
        <p class="footer-textbar footer-creator">&copy; 2025 - CT188 Nh√≥m 04 - ƒê·∫°i h·ªçc C·∫ßn Th∆°</p>
        <div class="footer-logo">
            <a href="https://www.ctu.edu.vn/"><img src="Assets/img/LogoCTU_with_text_2.png" alt="" width="350"></a>
        </div>
        <h5 class="footer-text">
            ƒê·ªãa ch·ªâ: Khu 2, ƒê. 3/2, P. Xu√¢n Kh√°nh, Q. Ninh Ki·ªÅu, TP. CT<br>
            Email: dhct@ctu.edu.vn
        </h5>
        <div class="footer-textbar footer--flex">
            <p>L∆∞·ª£t truy c·∫≠p:</p>
            <div class="footer-textbar__link">
                <a href="https://youtube.com/ctudhct"><i class="ri-tiktok-fill"></i></a> 
                <a href="https://youtube.com/ctudhct"><i class="ri-youtube-fill"></i></a> 
                <a href="https://youtube.com/ctudhct"><i class="ri-facebook-fill"></i></a>
            </div>
        </div>
        <button class="to-top"><i class="to-top__icon ri-arrow-up-line"></i></button>
    </footer>
    
    <script>
    let cart = JSON.parse(localStorage.getItem("cart")) || []; // L·∫•y d·ªØ li·ªáu gi·ªè h√†ng t·ª´ localStorage
    // h√†m x√≥a s·∫£n ph·∫©m kh·ªèi gi·ªè h√†ng
    function removeFromCart(index) {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];// L·∫•y d·ªØ li·ªáu gi·ªè h√†ng t·ª´ localStorage
    cart.splice(index, 1); //X√≥a s·∫£n ph·∫©m kh·ªèi m·∫£ng
    localStorage.setItem("cart", JSON.stringify(cart)); //L∆∞u l·∫°i gi·ªè h√†ng m·ªõi v√†o localStorage
    renderCart(); // C·∫≠p nh·∫≠t gi·ªè h√†ng
}

function renderCart() {
    let cart = JSON.parse(localStorage.getItem("cart")) || []; 
    let cartContainer = document.getElementById("cart-items"); 
    let totalPriceElement = document.getElementById("total-price");

    cartContainer.innerHTML = ""; 
    if (cart.length === 0) {
        cartContainer.innerHTML = "<p>üõí Gi·ªè h√†ng c·ªßa b·∫°n c√≤n tr·ªëng</p>";
        totalPriceElement.textContent = "0";
        return;
    }

    let total = 0;
    cart.forEach((item, index) => {
        let itemTotal = item.price * item.quantity;
        total += itemTotal;

        let cartItemHTML = `
            <div class="cart-item">
                <span>${item.name} - ${item.price.toLocaleString()}ƒë x ${item.quantity}</span>
                <span class="cart-nav">
                    <input type="number" value="${item.quantity}" min="1" max="99" onchange="updateQuantity(${index}, this.value)">
                    <button onclick="removeFromCart(${index})">X√≥a</button>
                </span>
            </div>
        `;
        cartContainer.innerHTML += cartItemHTML;
    });

    totalPriceElement.textContent = total.toLocaleString(); 
}



    function clearCart() {
        if (confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô gi·ªè h√†ng kh√¥ng?")) {
        cart = []; // X√≥a to√†n b·ªô s·∫£n ph·∫©m trong gi·ªè h√†ng
        localStorage.setItem("cart", JSON.stringify(cart)); // C·∫≠p nh·∫≠t localStorage
        renderCart(); // C·∫≠p nh·∫≠t l·∫°i giao di·ªán gi·ªè h√†ng
        }
    }
    //h√†m c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng s·∫£n ph·∫©m
    function updateQuantity(index, quantity) {
    let cart = JSON.parse(localStorage.getItem("cart")) || []; // L·∫•y d·ªØ li·ªáu gi·ªè h√†ng t·ª´ localStorage
    // ki·ªÉm tra v√† gi·ªõi h·∫°n s·ªë l∆∞·ª£ng
    if (quantity < 1) {
        quantity = 1;
    } else if (quantity > 99) {
        quantity = 99;
    }

    cart[index].quantity = parseInt(quantity); // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng s·∫£n ph·∫©m trong gi·ªè h√†ng
    localStorage.setItem("cart", JSON.stringify(cart)); //L∆∞u l·∫°i gi·ªè h√†ng v√†o localStorage
    renderCart(); // C·∫≠p nh·∫≠t l·∫°i gi·ªè h√†ng
    }

    // h√†m chuy·ªÉn sang trang thanh to√°n
        function goToCheckout() {
            localStorage.setItem("cart", JSON.stringify(cart));
            window.location.href = "checkout.html";
        }
    
        renderCart();
    </script>
</body>
</html>
